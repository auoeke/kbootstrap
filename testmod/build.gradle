plugins {
    id("wheel-fabric")
    id("fabric.mod.gradle")
    id("kbootstrap-plugin").version("latest.release")
}

sourceSets {
    main {
        kotlin.srcDir("src")
    }
}

kbootstrap {
    // The standard library is always included.
    module("coroutines", "reflect", "serialization")
    // or
    allModules()
}

wheel {
    publish {
        enabled = false
    }
}

dependencies {
    runtimeOnly(rootProject)
}

mod {
    entrypoints(main: [kbootstrap: [
        "net.auoeke.testmod.Main::mainInitializer",
        "net.auoeke.testmod.Main",
        "net.auoeke.testmod.Main::init",
        'net.auoeke.testmod.Main$NamedCompanion::staticInitializer',
        'net.auoeke.testmod.Main$NamedCompanion::initializer',
        'net.auoeke.testmod.Main$NamedCompanion::staticInit',
        'net.auoeke.testmod.Main$NamedCompanion',
        'net.auoeke.testmod.Main$NamedCompanion::init',
        "net.auoeke.testmod.Object::staticInitializer",
        "net.auoeke.testmod.Object::initializer",
        "net.auoeke.testmod.Object::staticInit",
        "net.auoeke.testmod.Object",
        "net.auoeke.testmod.Object::init",
    ]])
}
